<!doctype html>
<html lang='ja'>
<head>
  <title>Counter Login</title>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link rel='stylesheet' href='/libs/bootstrap-3.3.6/css/bootstrap.min.css' />
  <link rel='stylesheet' href='stylesheets/custom.css' />
</head>
<body>
  <div id='content-center' class='container'>
    <div class='row'>

      <div class='col-md-6 col-md-offset-3'>
        <div class='panel panel-login'>
          <div class='panel-heading'>
            <div class='row'>
              <div class='col-xs-6'>
                <a href='#' id='login-form-link'>Login</a>
              </div>
              <div class='col-xs-6'>
                <a href='#' id='resister-form-link'>Resister</a>
              </div>
            </div>
          </div>
          <div class='panel-body'>
            <div class='row'>
              <div class='col-md-12'>

                <form action='/login' method='GET' role='form' id='login-form'>
                  <div class='form-group'>
                    <input class='form-control' type='text' name='email' placeholder='Email'/>
                  </div>
                  <div class='form-group'>
                    <input class='form-control' type='password' name='password' placeholder='Password'/>
                  </div>
                  <div class='form-group'>
                    <div class='row'>
                      <div class='col-sm-6 col-sm-offset-3'>
                        <button type='submit' class='btn btn-primary form-control'>LOG IN</button>
                      </div>
                    </div>
                  </div>
                </form>

                <form role='form' id='resister-form'>
                  <div class='form-group'>
                    <input class='form-control' type='text' name='email' placeholder='Email'/>
                  </div>
                  <div class='form-group'>
                    <input class='form-control' type='password' name='password' placeholder='Password'/>
                  </div>
                  <div class='form-group'>
                    <div class='row'>
                      <div class='col-sm-6 col-sm-offset-3'>
                        <button type='submit' class='btn btn-primary form-control'>RESISTER</button>
                      </div>
                    </div>
                  </div>
                </form>

              </div>
            </div>


          </div>
        </div>
      </div>
    </div>
  </div>

  <script src='/libs/jquery-1.12.2.js'></script>
  <script src='/libs/bootstrap-3.3.6/js/bootstrap.min.js'></script>
  <script>
    // for register form
    document.getElementById('login-form').style.display = 'block';
    document.getElementById('resister-form').style.display = 'none';
    document.getElementById('login-form-link').className = 'active';
    document.getElementById('resister-form-link').className = '';
    document.getElementById('login-form-link').addEventListener('click', function(e){
      e.preventDefault();
      document.getElementById('login-form').style.display = 'block';
      document.getElementById('resister-form').style.display = 'none';
      document.getElementById('login-form-link').className = 'active';
      document.getElementById('resister-form-link').className = '';
    });
    document.getElementById('resister-form-link').addEventListener('click', function(e){
      e.preventDefault();
      document.getElementById('login-form').style.display = 'none';
      document.getElementById('resister-form').style.display = 'block';
      document.getElementById('login-form-link').className = '';
      document.getElementById('resister-form-link').className = 'active';
    });
    document.getElementById('resister-form').addEventListener('submit' , function(e){
      e.preventDefault();
      if (!e.target[0].value || !e.target[1].value) {
        console.log('empty');
        return;
      }
      var xhr = new XMLHttpRequest();
      xhr.onload = function(res){
        window.location.href = '/login?email=' + e.target[0].value + '&password=' + e.target[1].value;
      };
      xhr.onerror = function(e){
        console.log(e);
      };
      xhr.open('POST', '/user');
      xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
      xhr.responseType = 'json';
      xhr.send(JSON.stringify({ email: e.target[0].value, password: e.target[1].value }));
    });
  </script>
</body>
</html>